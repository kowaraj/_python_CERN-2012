<!DOCTYPE html>
<!-- saved from url=(0064)http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>A quick Cython introduction</title>
    
    <meta name="author" content="Matthew Perry">

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="http://blog.perrygeo.net/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="./A quick Cython introduction_files/style.css" rel="stylesheet" type="text/css" media="all">

    <link rel="alternate" type="application/atom+xml" title="Atom" href="http://blog.perrygeo.net/atom.xml">

  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  <script type="text/javascript" async="" src="./A quick Cython introduction_files/ga.js"></script><script type="text/javascript" async="" src="./A quick Cython introduction_files/embed.js"></script><script src="./A quick Cython introduction_files/thread.js" async="" charset="UTF-8"></script><link rel="stylesheet" type="text/css" href="./A quick Cython introduction_files/defaults.css"><script src="./A quick Cython introduction_files/disqus.js" async="" charset="UTF-8"></script><link rel="stylesheet" type="text/css" href="./A quick Cython introduction_files/theme.css"><script src="./A quick Cython introduction_files/theme.js" async="" charset="UTF-8"></script><script src="./A quick Cython introduction_files/event.js" async="" charset="UTF-8"></script></head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <div class="pull-right" style="padding-top: 15px;"><a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/atom.xml"><img src="./A quick Cython introduction_files/feed.png"></a> </div>
          <a class="brand" href="http://blog.perrygeo.net/">Perrygeo</a>
          <ul class="nav">
              <!-- 
              
            
            


  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  



            -->
            <li class="divider-vertical"></li>
            <li><a href="http://blog.perrygeo.net/archive.html">Archive</a></li>
            <li><a href="http://blog.perrygeo.net/pages.html">Pages</a></li>
            <li><a href="http://blog.perrygeo.net/tags.html">Tags</a></li>
            <li class="divider-vertical"></li>
            <li><a href="http://blog.perrygeo.net/pages/about.html">About</a></li>
            <li><a href="http://blog.perrygeo.net/pages/projects.html">Projects</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="page-header">
    <h1>A quick Cython introduction </h1> <h1><small></small></h1>
</div>

<div class="row">
  <div class="span10">
    <div class="box"><p>I love python for its beautiful code and practicality. But it’s not going to win a <a href="http://shootout.alioth.debian.org/debian/benchmark.php?test=all&lang=python&lang2=gcc">pure speed race</a> with most languages. Most people think of speed and ease-of-use as polar opposites - probably because they remember the pain of writing C. <a href="http://www.cython.org/">Cython</a> tries to eliminate that duality and lets you have python syntax with C data types and functions - the best of both worlds. Keeping in mind that I’m by no means an expert at this, here are my notes based on my first real experiment with Cython:</p>

<p>EDIT: Based on some feedback I’ve received there seems to be some confusion - Cython is for generating <em>C extensions to Python</em> not standalone programs. The whole point is to speed up an existing python app one function at a time. No rewriting the whole application in C or Lisp. No <a href="http://www.dalkescientific.com/writings/NBN/c_extensions.html">writing C extensions by hand</a>. Just an easy way to get C speed and C data types into your slow python functions.</p>
<hr>
<p>So lets say we want to make this function faster. It is the <a href="http://mathworld.wolfram.com/GreatCircle.html">“great circle” calculation</a>, a quick spherical trig problem to calculate distance along the earth’s surface between two points:</p>

<p><em>p1.py</em></p>

<pre><code>import math

def great_circle(lon1,lat1,lon2,lat2):
    radius = 3956 #miles
    x = math.pi/180.0

    a = (90.0-lat1)*(x)
    b = (90.0-lat2)*(x)
    theta = (lon2-lon1)*(x)
    c = math.acos((math.cos(a)*math.cos(b)) +
                  (math.sin(a)*math.sin(b)*math.cos(theta)))
    return radius*c</code></pre>

<p>Lets try it out and <a href="http://www.diveintopython.org/performance_tuning/timeit.html">time it</a> over 1/2 million function calls:</p>

<pre><code>import timeit  

lon1, lat1, lon2, lat2 = -72.345, 34.323, -61.823, 54.826
num = 500000

t = timeit.Timer("p1.great_circle(%f,%f,%f,%f)" % (lon1,lat1,lon2,lat2), 
                       "import p1")
print "Pure python function", t.timeit(num), "sec"</code></pre>

<p>About <strong>2.2 seconds</strong>. Too slow!</p>

<p>Lets try a quick rewrite in Cython and see if that makes a difference: <em>c1.pyx</em></p>

<pre><code>import math

def great_circle(float lon1,float lat1,float lon2,float lat2):
    cdef float radius = 3956.0 
    cdef float pi = 3.14159265
    cdef float x = pi/180.0
    cdef float a,b,theta,c

    a = (90.0-lat1)*(x)
    b = (90.0-lat2)*(x)
    theta = (lon2-lon1)*(x)
    c = math.acos((math.cos(a)*math.cos(b)) + (math.sin(a)*math.sin(b)*math.cos(theta)))
    return radius*c</code></pre>

<p>Notice that we still <em>import math</em> - cython lets you mix and match python and C data types to some extent. The conversion is handled automatically though not without cost. In this example all we’ve done is define a <em>python</em> function, declare its input parameters to be floats, and declare a static C float data type for all the variables. It still uses the python math module to do the calcs.</p>

<p>Now we need to convert this to C code and compile the python extension. The best way to do this is through a <a href="http://ldots.org/pyrex-guide/2-compiling.html#distutils">setup.py distutils script</a>. But we’ll do it the <a href="http://ldots.org/pyrex-guide/2-compiling.html#gcc">manual way</a> for now to see what’s happening:</p>

<pre><code># this will create a c1.c file - the C source code to build a python extension
cython c1.pyx

# Compile the object file   
gcc -c -fPIC -I/usr/include/python2.5/ c1.c

# Link it into a shared library
gcc -shared c1.o -o c1.so</code></pre>

<p>Now you should have a c1.so (or .dll) file which can be imported in python. Lets give it a run:</p>

<pre><code>    t = timeit.Timer("c1.great_circle(%f,%f,%f,%f)" % (lon1,lat1,lon2,lat2), 
                     "import c1")
    print "Cython function (still using python math)", t.timeit(num), "sec"</code></pre>

<p>About <strong>1.8 seconds</strong>. Not the kind of speedup we were hoping for but its a start. The bottleneck must be in the usage of the python math module. Lets use the C standard library trig functions instead:</p>

<p><em>c2.pyx</em></p>

<pre><code>cdef extern from "math.h":
    float cosf(float theta)
    float sinf(float theta)
    float acosf(float theta)

def great_circle(float lon1,float lat1,float lon2,float lat2):
    cdef float radius = 3956.0 
    cdef float pi = 3.14159265
    cdef float x = pi/180.0
    cdef float a,b,theta,c

    a = (90.0-lat1)*(x)
    b = (90.0-lat2)*(x)
    theta = (lon2-lon1)*(x)
    c = acosf((cosf(a)*cosf(b)) + (sinf(a)*sinf(b)*cosf(theta)))
    return radius*c</code></pre>

<p>Instead of importing the math module, we use <em>cdef extern</em> which uses the C function declarations from the specified include header (in this case math.h from the C standard library). We’ve replaced the calls to some of the expensive python functions and are ready to build the new shared library and re-test:</p>

<pre><code>    t = timeit.Timer("c2.great_circle(%f,%f,%f,%f)" % (lon1,lat1,lon2,lat2), 
                     "import c2")
    print "Cython function (using trig function from math.h)", t.timeit(num), "sec"</code></pre>

<p>Now that’s a bit more like it. ** 0.4 seconds ** - a 5x speed increase over the pure python function. What else can we do to speed things up? Well c2.great_circle() is still a python function which means that calling it incurs the overhead of the python API, constructing the argument tuple, etc. If we could write it as a pure C function, we might be able to speed things up a bit.</p>

<p><em>c3.pyx</em></p>

<pre><code>cdef extern from "math.h":
    float cosf(float theta)
    float sinf(float theta)
    float acosf(float theta)

cdef float _great_circle(float lon1,float lat1,float lon2,float lat2):
    cdef float radius = 3956.0 
    cdef float pi = 3.14159265
    cdef float x = pi/180.0
    cdef float a,b,theta,c

    a = (90.0-lat1)*(x)
    b = (90.0-lat2)*(x)
    theta = (lon2-lon1)*(x)
    c = acosf((cosf(a)*cosf(b)) + (sinf(a)*sinf(b)*cosf(theta)))
    return radius*c

def great_circle(float lon1,float lat1,float lon2,float lat2,int num):
    cdef int i
    cdef float x
    for i from 0 &lt; = i &lt; num:
        x = _great_circle(lon1,lat1,lon2,lat2)
    return x</code></pre>

<p>Notice that we still have a python function wrapper (_def_) which takes an extra argument, num. The looping is done inside this function with <code>for i from 0 &lt; = i &lt; num:</code> instead of the more pythonic but slower <code>for i in range(num):`. The actual work is done in a C function (_cdef_) which returns float type. This runs in **0.2 seconds** - a 10x speed boost over the original python function.</code></p>

<p>Just to confirm that we’re doing things optimally, lets write a little app in pure C and time it:</p>

<pre><code>#include &lt;math .h&gt;
#include &lt;stdio .h&gt;
#define NUM 500000

float great_circle(float lon1, float lat1, float lon2, float lat2){
    float radius = 3956.0;
    float pi = 3.14159265;
    float x = pi/180.0;
    float a,b,theta,c;

    a = (90.0-lat1)*(x);
    b = (90.0-lat2)*(x);
    theta = (lon2-lon1)*(x);
    c = acos((cos(a)*cos(b)) + (sin(a)*sin(b)*cos(theta)));
    return radius*c;
}

int main() {
    int i;
    float x;
    for (i=0; i &lt; = NUM; i++) 
        x = great_circle(-72.345, 34.323, -61.823, 54.826);
    printf("%f", x);
}</code></pre>

<p>Now compile it with <code>gcc -lm -o ctest ctest.c</code> and test it with <code>time ./ctest</code>… about <strong>0.2 seconds as well</strong>. This gives me confidence that my Cython extension is at least as efficient as my C code (which probably isn’t saying much as my C skills are weak).</p>
<hr>
<p>Some cases will be more or less optimal for cython depending on how much looping, number-crunching and python-function-calling are slowing you down. In some cases people have reported 100 to 1000x speed boosts. For other tasks it might not be so helpful. Before going crazy rewriting your python code in Cython, keep this in mind:</p>

<blockquote>
<p>“We should forget about small efficiencies, say about 97% of the time: premature optimization is the root of all evil.” – Donald Knuth</p>
</blockquote>

<p>In other words, write your program in python first and see if it works alright. Most of the time it will… some times it will bog down. Use a <a href="http://docs.python.org/lib/module-hotshot.html">profiler</a> to find the slow functions and re-implement them in cython and you should see a quick return on investment.</p>

<p>Links: <a href="http://trac.gispython.org/projects/PCL/wiki/WorldMill">WorldMill</a> - a python module by Sean Gillies which uses Cython to provide a fast, clean python interface to the libgdal library for handling vector geospatial data.</p>

<p><a href="http://www.sagemath.org:9001/WritingFastPyrexCode">Writing Fast Pyrex code</a> (Pyrex is the predecessor of Cython with similar goals and syntax)</p></div>
    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="http://blog.perrygeo.net/2008/04/15/spatial-data-in-sqlite" title="Spatial data in SQLite">← Previous</a></li>
      
        <li><a href="http://blog.perrygeo.net/archive.html">Archive</a></li>
      
        <li class="next"><a href="http://blog.perrygeo.net/2008/04/21/hike-of-doom-2-ogc-kml" title="Hike of Doom #2- OGC KML">Next →</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"><div id="dsq-content-stub" style="display: none;"><img width="71" height="17" alt="DISQUS" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAAARCAYAAAH4YIFjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABwdJREFUeNpi/P//PwMhwAIiGBkZGeK6V8JVh9rqdfrc0ixnEDb+wPD2rAAjMSYBBBBRisDWwKxCthIE/q8Q+A8yhCiTAAIIrCi+ZxVMZSAQr19UGs4IMxWd/X8Rw3/GOKDhW43fgzwF1hX7n5EJ2dSp2QFNUKcZwJ31/78CkvPBGkGGMXidSUTWCxBAxAUAEQAcJzCvIXsDBPwsNBU2nbj+AMpdsFA8PAHsLZj3QC5D9hrIAEtN+RMwAzRkxcB0iK3eQ6iQIRAnoMTE//8CyHwmWHQdv/7QAiZ44/ErMP383acsqNB5iMnPlsFdsUZ6IU3CCCCA4AYBw8kBJgj06gGkmHJAFgPyQV4ExeQEoNgHJHUBQMoAWRzoerBeYHgeQOJ/APIvQPkNUP4EuIdADBAGBRMQOABxQcakdSipHZldNGvL2zWHL8kD1d0HieVN33QYqnc/EAfULNwJVw8KTniQwvjAdPz/SEwKmL1KfC5QjwEQr4e5AyVdA3P4ASCe8O3nb1whmtib6r3IXlfpATBEFbpWH9ygJSdmBtXrOHPbyZWPXn1AqOZRwDSBS+YHo82SOQwiZnYMoS+EGC42nGdYzBiAnKpgGAbeA3ECkjwYQNnzH758///6o5cgofVIagy+/vgFF//y/ecHJLn1/18AA+/teZBcPZL4eSTxBJg7AAKIaomRmpkeV2IG5UcDpMSsAM2zF4BiG9DUFaCLQxPwBWCC/QBkg/QqoCVuEN4ASuDIaWc/DIMSItBxH0GCrkaqCVBxWO4BJWBQcK/PmrL+I1S8H0i9h4mjFfX7GTRyIdEuHzIfZtb/Zdw3oGyQnvP/d9pNgRc+MLCwJMxxWk7AI6Ar+YCWVSLLyYkJzIYlZqC6RGBhbg/lFwDlQHoDgfgALLfhjY8/X9XhpWPs/wWM7odyMBwDylU8nOzyILYIH3cZslxBgM0cKHM+MOTAGCZnri7XCdS7ASgGLsc/fPlug9cxlrO/wUvYxYwJwCgLwHAMcrVlqCJ9BVlchJ+7EhRyQPwAyGaAFnhgsOPMzUhQroLVAU76yp/gGp/vtQbTr45pwMWOp1oDQ6QQiGEi6+EJGLmah0YJQ6CVtu3ivecKYHIpE9b8BPqcDSnawHSSu8m3eTvPyAHlzsPkDl25/wXMYAOq+XgtBFwIfn/GwCAOSq8HYCGCsNh8+hvksgYZIJchDkjljAKoHAKVJ6ByBbnmA5XESOL1oFIZSc9/cJkC1IukPuH/z/cw8fswdwyqcgYgwAaVYwYbQEnDSI1LbGABEDcCC1lYS4yhfO42n+fvPm9GKsAZkfJDA7RcwwYmQM1CbpUUADU3AB3AjxJ7wFwAFGsAqp2A0mBDahww8Gv4Mvrf2AKXWyMzgeHbk3wwh5X/DGPkR1OoHlCmn49cGCABkL8SgZn8ANbAQQaV4ZBK6yGwgbDr3G2GNx+/gkqShMTe1V///vsnA/KYjoKECjBwMPQCW0EngOrNQWxbHQWGFA8zBlAj5eztpwwbjl9lyPG1DFOUEAIFDqxJB6ksoC1ZN2NVsDm7zt4GNUhBgdUPrXwckWtQOJB0VQE2XRF8UQt9hodrIGw+FaDcWVjAwAshhsD7kAbPO2Dr78ZEBoZfHxQYHNYbwEogvIGjKSfOiNysBpaEL/acv8MODBhuUX7u00BhVVx6DZWlxHcDAxQEDl95AMZQAGqHLlSSFIanAnZWll0/f/8Bs2OcDB+5GavJVyGZtevsrYdL9p2XQ6rZGcnKI54nZRj2uoMCAVr4K8JkQAKgJsdEYN12AbmYYSGqYGJk/NC8bO91WHKUFRXgwace6ElDIF4PjHWHc3eeMZy98xSU8mB1mwE0FSQCU8ECZiZGVpi+yw9eLIfVlUyMjIf+/f/Pu/bIlTtIdSX5hauo+RagxxMZfr2fwHB3IT/Dy4MMDI/BzTABaP2aAGzmgPpN4gQDB1pmgIA+EAfcfvoGXl/mB1hXFuBxCLDs6oc26kBJZiIoxShLCqs9e/tp+vdfv8ENB08Tdf9FwHKsMtxxTfvK/SGgbHfx3vNyoL2g7DjR30r74vqjV2yA6lXgbnI2WtoH4yhEfGF4sAISSTcm9wOzDcidoE6lPTBLwRuyDMoJ5+DZagnLJIb/f3mh5edGcKoRs+5neHUUUgZxiIrhrK2wFchc7KwMmsByANjiAZUfoGzhCEpJIDlQowOYffqRC2RQS+f1x68HNx6/ygcqY9A7RMZAc5LcTS/zcLLZwcwB1evAzs/8pfsvwDu9yOplgRECzF4M8a7Gryw05NRB+sDtiC/3HjKcKeaDpgAEADVmNIDlsX4DqFPmCOvvMNxdkAAuX95dQFUPKnv06kEBmQgNOLpV5QbQpAsrcz4QUC+AVJsgqxcgoNcBqQy5QIIdONUDALcn6c0dtMJ9AAAAAElFTkSuQmCC"><img width="16" height="11" alt="..." src="data:image/gif;base64,R0lGODlhEAALAPQAAP///z2LqeLt8dvp7u7090GNqz2LqV+fuJ/F1IW2ycrf51aatHWswaXJ14i4ys3h6FmctUCMqniuw+vz9eHs8fb5+meku+Tu8vT4+cfd5bbT3tbm7PH2+AAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA" style="margin:0 0 3px 5px"></div><div id="dsq-content" style="display: block;" class="clearfix">      <div id="dsq-global-toolbar" class="dsq-clearfix">        <ul class="dsq-global-toolbar-right dsq-clearfix">                            <li class="dsq-community-box">                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-toolbar-item dsq-tt" onclick="DISQUS.dtpl.actions.fire(&#39;community.show&#39;); return false" title="Expand Community Box"><span class="dsq-toolbar-icon"></span></a>            </li>                            <li class="dsq-global-toolbar-dropdown-container">                    <div id="dsq-toolbar-dropdown">    <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-toolbar-logo dsq-toolbar-item dsq-clearfix"><span class="dsq-toolbar-icon">Disqus</span></a>    <div id="dsq-toolbar-dropdown-wrap" style="display: none">      <ul class="dsq-clearfix">                    <li class="dsq-login-link"><a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;auth.login&#39;); return false"><span class="dsq-toolbar-icon"></span><span class="dsq-toolbar-label">Login</span></a></li>                    <li class="dsq-about-link"><a href="http://disqus.com/" target="_blank"><span class="dsq-toolbar-icon"></span><span class="dsq-toolbar-label">About Disqus</span></a></li>      </ul>    </div>  </div>            </li>        </ul>                <ul class="dsq-global-toolbar-left dsq-clearfix">            <li class="dsq-like-thread">                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-like-thread-button" class="dsq-toolbar-item dsq-clearfix  dsq-tt" onclick="DISQUS.dtpl.actions.fire(&#39;thread.vote&#39;, 1); return false;" title="I like this page">                    <span class="dsq-toolbar-icon"></span>                    <span class="dsq-toolbar-label">Like</span>                </a>            </li>            <li class="dsq-dislike-thread">                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-dislike-thread-button" class="dsq-toolbar-item dsq-clearfix  dsq-tt" onclick="DISQUS.dtpl.actions.fire(&#39;thread.vote&#39;, -1); return false" title="I don&#39;t like this page">                    <span class="dsq-toolbar-icon">Dislike</span>                </a>            </li>            <li class="dsq-like-panel">                <ul class="dsq-like-faces dsq-clearfix">                        <li class="dsq-like-activity">        3 people liked this.    </li>                </ul>            </li>        </ul>            </div>    <div id="dsq-like-tooltip">      <div id="dsq-share-step-1" class="dsq-share-step">        <h3>Glad you liked it. Would you like to share?</h3>        <p class="dsq-tooltip-checkbox"><input type="checkbox" id="dsq-share-thread-facebook" value="Facebook"><label for="dsq-share-thread-facebook"><span class="dsq-facebook">Facebook</span></label></p>        <p class="dsq-tooltip-checkbox"><input type="checkbox" id="dsq-share-thread-twitter" value="Twitter"><label for="dsq-share-thread-twitter"><span class="dsq-twitter">Twitter</span></label></p>        <ul id="dsq-tooltip-actions">                        <li><a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;thread.share.send&#39;); return false" class="dsq-primary-action">Share</a></li>                    <li><a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;thread.share.cancel&#39;); return false" class="dsq-secondary-action">No thanks</a></li>        </ul>      </div>      <div id="dsq-share-step-2" class="dsq-share-step" style="display:none !important">        <p>Sharing this page …</p>      </div>      <div id="dsq-share-step-3" class="dsq-share-step" style="display:none !important">        <p>Thanks! <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-tooltip-decline" onclick="DISQUS.dtpl.actions.fire(&#39;thread.share.cancel&#39;); return false">Close</a></p>      </div>    </div>                                <div class="dsq-reply " id="dsq-reply">          <div id="dsq-account-dropdown">                  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;auth.login&#39;); return false;">Login</a>              </div>      <h3>Add New Comment</h3>        <div class="dsq-avatar">              <img src="./A quick Cython introduction_files/noavatar32.png">          </div>    <div class="dsq-textarea dsq-textarea-reply">      <div class="dsq-textarea-background">        <div class="dsq-textarea-wrapper" style="height: auto;">          <!-- filled dynamically -->        <iframe name="easyXDM_DISQUS_net_default1095_provider" id="easyXDM_DISQUS_net_default1095_provider" scrolling="no" frameborder="0" src="./A quick Cython introduction_files/reply.html" style="height: 58px;"></iframe></div>                  <div id="dsq-media-preview" class="dsq-media-preview" style="display:none">          </div>                <div class="dsq-post-tools">          <ul>            <li class="dsq-post-as">                                <button type="button" class="dsq-button" onclick="DISQUS.dtpl.actions.fire(&#39;comments.validate&#39;, null, this);">                    Post as …                  </button>                          </li>                          <li class="dsq-attach-media">                <div class="dsq-attach-media-container">                  <span>Image</span>                  <!-- filled dynamically -->                <iframe name="easyXDM_DISQUS_net_default1096_provider" id="easyXDM_DISQUS_net_default1096_provider" scrolling="no" frameborder="0" src="./A quick Cython introduction_files/upload.html"></iframe></div>              </li>                        <li class="dsq-share-on dsq-clearfix">                            </li>          </ul>        </div>      </div>    </div>  </div>                              <div id="dsq-sort-by">    <select id="dsq-sort-select" onchange="DISQUS.dtpl.actions.fire(&#39;thread.sort&#39;, this.value);">              <option value="hot" selected="selected">          Sort by popular now        </option>              <option value="best">          Sort by best rating        </option>              <option value="newest">          Sort by newest first        </option>              <option value="oldest">          Sort by oldest first        </option>          </select>  </div>      <h3>            Showing <span id="dsq-num-posts">20</span> comments        </h3>        <ul id="dsq-comments">            <li id="comment-512883828">  </li><li id="dsq-comment-512883828" data-dsq-comment-id="512883828" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand perrygeo&#39;s profile">      <a href="http://disqus.com/guest/f900c4e7dc008b7604206c803467a661/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883828, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/uploads/anonusers/495/5004/avatar32.jpg?1281549414" alt="">      </a>    </div>    <div id="dsq-comment-body-512883828" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">perrygeo</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883828); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883828); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883828">                <div class="dsq-comment-text" id="dsq-comment-text-512883828">        <p>Thank you Grammar Police. In an effort to learn Cython, I seem to have forgotten English.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883828"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883828">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883828); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883828, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883828" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883828);" title="Link to comment by perrygeo">          4 years ago      </a></li>            <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883828" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883828); return false">1          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883828, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883828"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883828"></li>            <li id="comment-512883821">  </li><li id="dsq-comment-512883821" data-dsq-comment-id="512883821" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Charlie&#39;s profile">      <a href="http://disqus.com/guest/f142bd469edde6f792475f1c4acef006/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883821, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883821" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Charlie</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883821); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883821); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883821">                <div class="dsq-comment-text" id="dsq-comment-text-512883821">        <p>Thank you for this example.</p>

<p>I came across this page while looking into the Pypy project.  I have not tried cython, but out of curiousity I tried running this code under pypy-1.8.  The numbers I got seemed comparable.</p>

<p>Initial example, almost verbatim (only change: rename <a href="http://p1.py/" rel="nofollow">p1.py</a> to <a href="http://greatcircle_p1.py/" rel="nofollow">greatcircle_p1.py</a>): </p>

<p>$ python2.5 <a href="http://greatcircle.py/" rel="nofollow">greatcircle.py</a><br>Pure python function 1.65540099144 sec<br>$ python2.7 <a href="http://greatcircle.py/" rel="nofollow">greatcircle.py</a><br>Pure python function 1.60749793053 sec<br>$ ./pypy-c <a href="http://greatcircle.py/" rel="nofollow">greatcircle.py</a><br>Pure python function 0.139759063721 sec  (11.5x faster)</p>

<p>Increase iterations from 500000 to 5000000:</p>

<p>$ python2.5 <a href="http://greatcircle.py/" rel="nofollow">greatcircle.py</a><br>Pure python function 23.43481493 sec<br>$ python2.7 <a href="http://greatcircle.py/" rel="nofollow">greatcircle.py</a><br>Pure python function 15.9338200092 sec<br>$ ./pypy-c <a href="http://greatcircle.py/" rel="nofollow">greatcircle.py</a><br>Pure python function 1.22326803207 sec (13x faster)</p>

<p>My machine is a 2.33GHz Intel Core 2 Duo, 3GB 667MHz SDRAM, running OS X 10.5.8, stock python 2.5.1, brew python 2.7.2, and pypy-1.8 (based on Python 2.7, specifically: pypy-pypy-2346207d9946).  I don't have psyco installed to compare that.</p>

<p>I'm not sure what to make of this, I'm new to all of the above.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883821"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883821">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883821); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883821, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883821" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883821);" title="Link to comment by Charlie">          6 months ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883821" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883821); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883821, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883821"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883821"></li>            <li id="comment-512883817">  </li><li id="dsq-comment-512883817" data-dsq-comment-id="512883817" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Cees Timmerman&#39;s profile">      <a href="http://disqus.com/guest/2b8d8f903aa0791296f7abddf19688ac/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883817, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883817" class="dsq-comment-body">      <div class="dsq-comment-header">        <a href="http://www.facebook.com/profile.php?id=1564999382" target="_blank" class="dsq-commenter-name" rel="nofollow">Cees Timmerman</a>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883817); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883817); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883817">                <div class="dsq-comment-text" id="dsq-comment-text-512883817">        <p><a href="http://stackoverflow.com/questions/2581784/can-cython-compile-to-an-exe" rel="nofollow">http://stackoverflow.com/quest...</a><br>answered Apr 30 '10 at 9:12 by Aftershock:<br>"""<br><a href="http://wiki.cython.org/EmbeddingCython" rel="nofollow">http://wiki.cython.org/Embeddi...</a></p>

<p>Here it is, assuming you installed python to C:\Python31 and you want to use Microsoft Compiler. <a href="http://smalltest1.py/" rel="nofollow">smalltest1.py</a> - is the file you want to compile. test.exe - name of the executable. You need to set the environmental variables for cl.</p>

<p>C:\Python31\python.exe C:\Python31\Scripts\<a href="http://cython.py/" rel="nofollow">cython.py</a> <a href="http://smalltest1.py/" rel="nofollow">smalltest1.py</a> --embed</p>

<p>cl.exe /nologo /Ox /MD /W3 /GS- /DNDEBUG -Ic:\Python31\include -Ic:\Python31\PC /Tcsmalltest1.c /link /OUT:"test.exe" /SUBSYSTEM:CONSOLE /MACHINE:X86 /LIBPATH:c:\Python31\libs /LIBPATH:c:\Python31\PCbuild<br>"""</p>

<p>I guess gcc is similar to cl.exe.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883817"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883817">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883817); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883817, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883817" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883817);" title="Link to comment by Cees Timmerman">          1 year ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883817" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883817); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883817, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883817"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883817"></li>            <li id="comment-512883809">  </li><li id="dsq-comment-512883809" data-dsq-comment-id="512883809" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand nick&#39;s profile">      <a href="http://disqus.com/guest/ba9a02140202cfbef5fe75283058b152/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883809, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883809" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">nick</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883809); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883809); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883809">                <div class="dsq-comment-text" id="dsq-comment-text-512883809">        <p>@tom<br>"as long as the python install is 32 bit":<br>ehem, that's not the same as supporting 64bit... sorry, in my opinion requiring users to change their environment to accommodate a specific software makes that software unsuitable in a production environment.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883809"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883809">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883809); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883809, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883809" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883809);" title="Link to comment by nick">          2 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883809" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883809); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883809, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883809"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883809"></li>            <li id="comment-512883807">  </li><li id="dsq-comment-512883807" data-dsq-comment-id="512883807" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Alex Liberzon&#39;s profile">      <a href="http://disqus.com/guest/5b9ffdc3cae26470b5a3278b3c2ce4aa/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883807, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/uploads/anonusers/2341/2835/avatar32.jpg?1281549414" alt="">      </a>    </div>    <div id="dsq-comment-body-512883807" class="dsq-comment-body">      <div class="dsq-comment-header">        <a href="http://alexl.wordpress.com/" target="_blank" class="dsq-commenter-name" rel="nofollow">Alex Liberzon</a>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883807); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883807); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883807">                <div class="dsq-comment-text" id="dsq-comment-text-512883807">        <p>I get an error trying to compile the c3.pyx. Both c1.pyx and c2.pyx worked fine, but not c3.pyx.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883807"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883807">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883807); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883807, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883807" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883807);" title="Link to comment by Alex Liberzon">          2 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883807" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883807); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883807, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883807"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883807"></li>            <li id="comment-512883815">  </li><li id="dsq-comment-512883815" data-dsq-comment-id="512883815" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand tim&#39;s profile">      <a href="http://disqus.com/guest/851e34baec8c61a96a7e5e81c3b1c9d2/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883815, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883815" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">tim</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883815); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883815); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883815">                <div class="dsq-comment-text" id="dsq-comment-text-512883815">        <p>@ssam</p>

<p>Actually, Psyco has been working on intel/mac since 2007 and works just fine on x86_64 as long as the python install is 32 bit.</p>

<p>(Always google before you post.)</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883815"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883815">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883815); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883815, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883815" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883815);" title="Link to comment by tim">          3 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883815" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883815); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883815, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883815"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883815"></li>            <li id="comment-512883810">  </li><li id="dsq-comment-512883810" data-dsq-comment-id="512883810" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand navie&#39;s profile">      <a href="http://disqus.com/guest/460a42cff1cacb5eaed6bdbf0bd87346/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883810, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883810" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">navie</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883810); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883810); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883810">                <div class="dsq-comment-text" id="dsq-comment-text-512883810">        <p>Hi , perrygeo. How about your learning of cython? I wanna ask u a question..<br>I noticed that the type of value that your c function returns to your .pyx def function is basic type(like int,double,etc.),and  it works well. <br>However,now my c function returns a pointer p with the type (double *),which points to a list,and the p's memory is allocated by  malloc function. If I want to use the data stored in list p in my .pyx def function ,what should i do? Now I've tried to add the data in  list p into a python list,but it doesn't work and give the following error information:can't convert  to python object.. Anything can i do?</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883810"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883810">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883810); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883810, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883810" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883810);" title="Link to comment by navie">          3 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883810" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883810); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883810, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883810"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883810"></li>            <li id="comment-512883808">  </li><li id="dsq-comment-512883808" data-dsq-comment-id="512883808" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Gabriel&#39;s profile">      <a href="http://disqus.com/guest/49543f01f2f4a1f8f4a84ff19ea0b9a6/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883808, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883808" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Gabriel</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883808); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883808); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883808">                <div class="dsq-comment-text" id="dsq-comment-text-512883808">        <p>Great writeup would you be willing to have it included in the Cython docs? We can add you as an author :-)</p>

<p>Gabriel</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883808"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883808">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883808); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883808, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883808" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883808);" title="Link to comment by Gabriel">          3 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883808" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883808); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883808, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883808"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883808"></li>            <li id="comment-512883813">  </li><li id="dsq-comment-512883813" data-dsq-comment-id="512883813" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand ssam&#39;s profile">      <a href="http://disqus.com/guest/8910056e0eab3f768555521d5923a1df/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883813, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883813" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">ssam</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883813); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883813); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883813">                <div class="dsq-comment-text" id="dsq-comment-text-512883813">        <p>@psyco fans<br>but psyco only works on x86, not even x86 64bit.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883813"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883813">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883813); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883813, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883813" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883813);" title="Link to comment by ssam">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883813" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883813); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883813, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883813"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883813"></li>            <li id="comment-512883814">  </li><li id="dsq-comment-512883814" data-dsq-comment-id="512883814" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand perrygeo&#39;s profile">      <a href="http://disqus.com/guest/f900c4e7dc008b7604206c803467a661/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883814, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/uploads/anonusers/495/5004/avatar32.jpg?1281549414" alt="">      </a>    </div>    <div id="dsq-comment-body-512883814" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">perrygeo</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883814); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883814); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883814">                <div class="dsq-comment-text" id="dsq-comment-text-512883814">        <p>@Shawn<br>I use vim for almost everything these days. Thanks for the heads up on Clojure; i'll have to check that out.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883814"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883814">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883814); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883814, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883814" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883814);" title="Link to comment by perrygeo">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883814" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883814); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883814, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883814"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883814"></li>            <li id="comment-512883812">  </li><li id="dsq-comment-512883812" data-dsq-comment-id="512883812" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Shawn Fumo&#39;s profile">      <a href="http://disqus.com/guest/8c1f079b8ac4071f89fa3f0e56d6cdd6/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883812, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883812" class="dsq-comment-body">      <div class="dsq-comment-header">        <a href="http://www.shawnfumo.com/" target="_blank" class="dsq-commenter-name" rel="nofollow">Shawn Fumo</a>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883812); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883812); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883812">                <div class="dsq-comment-text" id="dsq-comment-text-512883812">        <p>Thanks a lot for this posting. I'm working on a program involving real-time knot simulation and had just re-implemented part of it in Cython.  That produced great results (brought a calculation down from 5 to 0.2), but I was still using Python's sqrt function. Taking your advice, I moved over to C's sqrtf, which brought it down to 0.04!</p>

<p>I have to say I'm glad for Cython's existance. I had rewrite a lot of things (much less elegant.. grr) to make it efficient, but it still beats writing in pure C. Knuth's quote is a good reminder, though. I may go back and make a couple of things clearer again now that I have a bit more of a margin to work with.</p>

<p>BTW, what editor are you using for your Python/Cython coding?</p>

<p>Also, I noticed your post on parallel programming a while back. Another thing you may want to check out is Clojure, a relatively new language built on the JVM. Two of it's strong points is concurrency and interoperability with Java libraries. The creator gave a talk here recently and I was pretty impressed, though I haven't had a chance to fuss with it myself yet.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883812"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883812">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883812); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883812, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883812" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883812);" title="Link to comment by Shawn Fumo">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883812" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883812); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883812, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883812"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883812"></li>            <li id="comment-512883824">  </li><li id="dsq-comment-512883824" data-dsq-comment-id="512883824" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Justin&#39;s profile">      <a href="http://disqus.com/guest/b2565c6bab951151e1b54682239b0d99/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883824, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883824" class="dsq-comment-body">      <div class="dsq-comment-header">        <a href="http://www.bouncybouncy.net/" target="_blank" class="dsq-commenter-name" rel="nofollow">Justin</a>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883824); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883824); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883824">                <div class="dsq-comment-text" id="dsq-comment-text-512883824">        <p>More on psyco:</p>

<p>normal version:<br>Pure python function 3.91737318039 sec</p>

<p>with psyco:<br>Pure python function 1.15499091148 sec</p>

<p>with psyco and changing all math.xxx to xxx<br>(from math import acos, cos, sin, pi)<br>Pure python function 0.049054145813 sec</p>

<p>not bad, a 100x improvement without writing any code :)</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883824"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883824">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883824); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883824, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883824" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883824);" title="Link to comment by Justin">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883824" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883824); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883824, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883824"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883824"></li>            <li id="comment-512883826">  </li><li id="dsq-comment-512883826" data-dsq-comment-id="512883826" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand perrygeo&#39;s profile">      <a href="http://disqus.com/guest/f900c4e7dc008b7604206c803467a661/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883826, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/uploads/anonusers/495/5004/avatar32.jpg?1281549414" alt="">      </a>    </div>    <div id="dsq-comment-body-512883826" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">perrygeo</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883826); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883826); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883826">                <div class="dsq-comment-text" id="dsq-comment-text-512883826">        <p>Jay,</p>

<p> That would be the case if this is a standalone program. But the whole point was to speed up an existing python codebase one function at a time by writing C extensions. This is one a small part of the overall program and it would be non-trivial to rewrite the entire thing in C from scratch. Which means you need to make a C extension to python - and Cython seems the best way to do that.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883826"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883826">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883826); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883826, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883826" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883826);" title="Link to comment by perrygeo">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883826" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883826); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883826, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883826"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883826"></li>            <li id="comment-512883827">  </li><li id="dsq-comment-512883827" data-dsq-comment-id="512883827" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Jay Kyburz&#39;s profile">      <a href="http://disqus.com/guest/a416fd93af0e4fb28ecf89defb0acd88/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883827, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883827" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Jay Kyburz</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883827); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883827); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883827">                <div class="dsq-comment-text" id="dsq-comment-text-512883827">        <p>Yeah but, if you ask me, by the time you get to your last example you might as well just write c and be done with it. right?</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883827"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883827">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883827); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883827, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883827" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883827);" title="Link to comment by Jay Kyburz">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883827" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883827); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883827, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883827"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883827"></li>            <li id="comment-512883825">  </li><li id="dsq-comment-512883825" data-dsq-comment-id="512883825" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Bullabadoo&#39;s profile">      <a href="http://disqus.com/guest/ae0ef7bc4af35ff0e7653fe41e2a9c72/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883825, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883825" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Bullabadoo</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883825); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883825); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883825">                <div class="dsq-comment-text" id="dsq-comment-text-512883825">        <p>Without psyco:<br>bulla@badoo:~/code/python&gt; python <a href="http://p1.py/" rel="nofollow">p1.py</a><br>Pure python function Pure python function 3.09896183014 sec<br>2.43880605698 sec</p>

<p>With psyco:<br>bulla@badoo:~/code/python&gt; python <a href="http://p1.py/" rel="nofollow">p1.py</a><br>Pure python function Pure python function 0.152606964111 sec<br>1.23215317726 sec</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883825"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883825">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883825); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883825, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883825" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883825);" title="Link to comment by Bullabadoo">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883825" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883825); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883825, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883825"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883825"></li>            <li id="comment-512883833">  </li><li id="dsq-comment-512883833" data-dsq-comment-id="512883833" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Duane&#39;s profile">      <a href="http://disqus.com/guest/3ecb0f3769169c5a8ed092ec2f5b8e23/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883833, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883833" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Duane</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883833); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883833); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883833">                <div class="dsq-comment-text" id="dsq-comment-text-512883833">        <p>You forgot something pretty crucial, the gcc optimization flags; instead of compiling the library with `gcc -c -fPIC -I/usr/include/python2.2/ mymodule.c`, compile it with `gcc -O2 -c -fPIC -I/usr/include/python2.2/ mymodule.c`, and instead of `gcc -lm -o ctest ctest.c` use `gcc -O2 -lm -o ctest ctest.c`. It's quite a noticeable difference on my machine, a speedup of around 6x.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883833"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883833">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883833); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883833, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883833" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883833);" title="Link to comment by Duane">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883833" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883833); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883833, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883833"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883833"></li>            <li id="comment-512883834">  </li><li id="dsq-comment-512883834" data-dsq-comment-id="512883834" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand perrygeo&#39;s profile">      <a href="http://disqus.com/guest/f900c4e7dc008b7604206c803467a661/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883834, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/uploads/anonusers/495/5004/avatar32.jpg?1281549414" alt="">      </a>    </div>    <div id="dsq-comment-body-512883834" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">perrygeo</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883834); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883834); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883834">                <div class="dsq-comment-text" id="dsq-comment-text-512883834">        <p>Henrik,  Good point. Psyco would be a decent quick fix. For this example, simply doing an import psyco; psyco.full() increased the speed of the pure python function by 2x to 1.1 seconds. Still not the kind of gain you see with C but it's better than nothing. And it looks like the quick psyco fix would be better than a poorly implemented Cython solution.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883834"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883834">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883834); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883834, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883834" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883834);" title="Link to comment by perrygeo">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883834" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883834); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883834, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883834"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883834"></li>            <li id="comment-512883835">  </li><li id="dsq-comment-512883835" data-dsq-comment-id="512883835" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Henrik Thostrup Jensen&#39;s profile">      <a href="http://disqus.com/guest/9ffe54dddf39980639aba5fae15c7082/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883835, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883835" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Henrik Thostrup Jensen</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883835); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883835); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883835">                <div class="dsq-comment-text" id="dsq-comment-text-512883835">        <p>Hi</p>

<p>Good examples and measurements. Have you tried psyco (<a href="http://psyco.sourceforge.net/)?" rel="nofollow">http://psyco.sourceforge.net/)...</a>   It is usually significantly faster for repetetive calculations than regular Python, and only requries an import to work (less work than rewriting Python to Cython.)</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883835"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883835">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883835); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883835, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883835" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883835);" title="Link to comment by Henrik Thostrup Jensen">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883835" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883835); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883835, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883835"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883835"></li>            <li id="comment-512883832">  </li><li id="dsq-comment-512883832" data-dsq-comment-id="512883832" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Grammar Police&#39;s profile">      <a href="http://disqus.com/guest/8da51612b07abd742ccdbc043f792fc4/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883832, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883832" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Grammar Police</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883832); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883832); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883832">                <div class="dsq-comment-text" id="dsq-comment-text-512883832">        <p>Both instance of the word "it’s" in this post should be "its".  You didn't mean "it is".  You meant the possessive pronoun.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883832"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883832">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883832); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883832, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883832" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883832);" title="Link to comment by Grammar Police">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883832" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883832); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883832, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883832"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883832"></li>            <li id="comment-512883831">  </li><li id="dsq-comment-512883831" data-dsq-comment-id="512883831" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Rune&#39;s profile">      <a href="http://disqus.com/guest/58b90620ad1ad673d4f2554861268907/" onclick="DISQUS.dtpl.actions.fire(&#39;profile.show&#39;, 512883831, null); return false">        <img src="./A quick Cython introduction_files/noavatar32.png" class="dsq-deferred-avatar" data-src="http://mediacdn.disqus.com/1348700635/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-512883831" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Rune</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.collapse&#39;, 512883831); return false;"><span>Collapse</span></a>        <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire(&#39;comments.expand&#39;, 512883831); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-512883831">                <div class="dsq-comment-text" id="dsq-comment-text-512883831">        <p>If you're compiling with the commands you've shown, you're compiling the C code without optimization enabled, which means that the code runs much slower than it ought to. Try adding -O3 to the gcc command lines.</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-512883831"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-512883831">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" onclick="DISQUS.dtpl.actions.fire(&#39;comments.like&#39;, this,512883831); return false">Like</a>        </li>                          <li>          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire(&#39;comments.reply&#39;,512883831, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#comment-512883831" onclick="DISQUS.dtpl.actions.fire(&#39;comments.permalink&#39;, 512883831);" title="Link to comment by Rune">          4 years ago      </a></li>            <li style="display:none">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" id="dsq-comment-like-count-512883831" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.showUserVotes&#39;, 512883831); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire(&#39;comments.report&#39;, 512883831, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-512883831"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-512883831"></li>      </ul>        <div id="dsq-pagination">      <ul id="dsq-footer" class="dsq-clearfix">        <div id="dsq-subscribe">            <li>      <a href="http://blog.perrygeo.net/2008/04/19/a-quick-cython-introduction/#" class="dsq-subscribe-email" onclick="return DISQUS.dtpl.actions.fire(&#39;thread.subscribe&#39;);">        <span class="dsq-font">M</span> <em>Subscribe by email</em>      </a>    </li>    <li>    <a href="http://perrygeo.disqus.com/a_quick_cython_introduction_94/latest.rss" class="dsq-subscribe-rss">      <span class="dsq-font">S</span> <em>RSS</em>    </a>  </li>    </div>  </ul>    </div>          </div><div>  </div></div>
<script type="text/javascript">
    
    var disqus_shortname = 'perrygeo'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the &lt;a href="http://disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;</noscript>
<a href="http://disqus.com/" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
  
  <div class="span2">
    <h4>Published</h4>
    <div class="date"><span>19 April 2008</span></div>
    <br>

  
    
    <h4>Tags</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="http://blog.perrygeo.net/tags.html#c-ref">c <span>1</span></a></li>
     
    	<li><a href="http://blog.perrygeo.net/tags.html#cython-ref">cython <span>1</span></a></li>
     
    	<li><a href="http://blog.perrygeo.net/tags.html#programming-ref">programming <span>1</span></a></li>
     
    	<li><a href="http://blog.perrygeo.net/tags.html#python-ref">python <span>6</span></a></li>
    
  



    </ul>
    


  </div>
</div>


      </div>

      <div class="container">
      <footer>
      <p>
        © Matthew Perry 2012  | 
        <a href="https://github.com/perrygeo/perrygeo.github.com/tree/master/_posts">src</a> |
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">license</a>
      </p>
      </footer>
      </div>

    </div> <!-- /container -->

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-253206-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  


<iframe name="easyXDM_DISQUS_net_default1094_provider" id="easyXDM_DISQUS_net_default1094_provider" style="position: absolute; top: -2000px; left: 0px;" frameborder="0" src="./A quick Cython introduction_files/def.html"></iframe></body></html>